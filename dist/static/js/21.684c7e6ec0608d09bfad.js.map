{"version":3,"sources":["webpack:///src/views/operation/individual-rebate.vue","webpack:///./src/views/operation/individual-rebate.vue?54ca","webpack:///./src/views/operation/individual-rebate.vue"],"names":["__webpack_exports__","data","_this","this","tableColumns","title","key","align","width","render","h","params","row","avatar","indexOf","attrs","src","style","height","border-radius","margin-top","isBeingEdited","props","value","directRebateRatioInputValue","step","min","max","formatter","toFixed","parser","replace","on","on-change","newValue","directRebateRatio","subordinateRebateRatioInputValue","subordinateRebateRatio","type","marginRight","click","submitRowChange","cancelRowChange","index","hasIndividualRebateRatio","beginChangeRow","onClickIndividualRebateRatioCancelBtn","tableRows","searchedAgentId","beingEditedRowIndex","isShowingAgentWithoutIndividualRebateRatio","latestSearch","created","queryAllAgentsWithIndividualRebateRatio","methods","handleSearchAgent","trim","length","agentId","parseInt","isNaN","$Message","error","queryAgentRebateRatioInfo","_this2","$http","post","global","url","query_agents_individual_rebate_ratio_info","then","records","i","push","id","agent_id","name","commerceId","commerce_id","commerceName","commerce_name","direct_rebate_ratio","subordinate_rebate_ratio","has_individual_rebate_ratio","agentLevelName","getAgentLevelNameByLevel","agent_level","_this3","query_agent_individual_rebate_ratio_info","record","err_code","err_msg","_this4","update_agent_individual_rebate_ratio_info","info","_this5","$Modal","confirm","content","onOk","cancelIndividualRebateRatio","_this6","cancel_agent_individual_rebate_ratio","level","toString","operation_individual_rebate","_vm","_h","$createElement","_c","_self","staticClass","inline","label","label-width","staticStyle","placeholder","maxlength","clearable","model","callback","$$v","expression","_v","margin-right","color","columns","border","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","individual_rebate"],"mappings":"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","file":"static/js/21.684c7e6ec0608d09bfad.js","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"content-bar\">\r\n      <Form inline>\r\n        <FormItem label=\"代理ID\" :label-width=\"80\">\r\n          <Input v-model=\"searchedAgentId\" placeholder=\"代理ID\" :maxlength=\"6\" clearable style=\"width: 10em;\"/>\r\n        </FormItem>\r\n\r\n\r\n        <FormItem :label-width=\"0\"> <Button type=\"primary\" @click=\"handleSearchAgent\" style=\"margin-right: 10px;\">查询</Button></FormItem>\r\n        </FormItem>\r\n      </Form>\r\n\r\n    </div>\r\n    <div style=\"margin-top: 10px;\">\r\n      <div v-if=\"isShowingAgentWithoutIndividualRebateRatio\" style=\"color: red;\">该代理尚未被授予独立返利比例：</div>\r\n      <div v-else>被授予独立返利比例的代理：</div>\r\n    </div>\r\n    <Table :columns=\"tableColumns\" :data=\"tableRows\" border>\r\n    </Table>\r\n  </div>\r\n</template>\r\n<style>\r\n  @import \"../../assets/style/common.css\";\r\n</style>\r\n<script>\r\n  export default {\r\n    data() {\r\n      return {\r\n        tableColumns: [\r\n          { title: \"游戏内id\", key: \"id\", align: \"center\", width: 100 },\r\n          { title: \"名称\", key: \"name\", align: \"center\", width: 150 },\r\n          {\r\n            title: \"头像\",\r\n            key: \"avatar\",\r\n            align: \"center\",\r\n            width: 80,\r\n            render: (h, params) => {\r\n              if (params.row.avatar.indexOf(\"http://\") == -1 && params.row.avatar.indexOf(\"https://\") == -1) {\r\n                return h(\"div\", \"\");\r\n              } else {\r\n                return h(\"img\", {\r\n                  attrs: {\r\n                    src: params.row.avatar\r\n                  },\r\n                  style: {\r\n                    width: \"40px\",\r\n                    height: \"40px\",\r\n                    \"border-radius\": \"5px\",\r\n                    \"margin-top\": \"5px\"\r\n                  }\r\n                });\r\n              }\r\n            }\r\n          },\r\n          { title: \"所属商务\", key: \"commerceName\", align: \"center\", width: 100 },\r\n          { title: \"代理等级\", key: \"agentLevelName\", align: \"center\", width: 100 },\r\n          {\r\n            title: \"直属返利比例\",\r\n            key: \"directRebateRatio\",\r\n            align: \"center\",\r\n            width: 120,\r\n            render: (h, params) => {\r\n              if (params.row.isBeingEdited) {\r\n                return h(\"InputNumber\", {\r\n                  props: {\r\n                    value: params.row.directRebateRatioInputValue,\r\n                    step: 0.01,\r\n                    min: 0,\r\n                    max: 1,\r\n                    formatter: value => `${(100 * value).toFixed(0)}%`,\r\n                    parser: value => (0.01 * value.replace(\"%\", \"\")).toFixed(2)\r\n                  },\r\n                  on: {\r\n                    \"on-change\": newValue => {\r\n                      params.row.directRebateRatioInputValue = newValue;\r\n                    }\r\n                  }\r\n                });\r\n              } else {\r\n                return h(\"div\", (100 * params.row.directRebateRatio).toFixed(0) + \"%\");\r\n              }\r\n            }\r\n          },\r\n          {\r\n            title: \"下级返利比例\",\r\n            key: \"subordinateRebateRatio\",\r\n            align: \"center\",\r\n            width: 120,\r\n            render: (h, params) => {\r\n              if (params.row.isBeingEdited) {\r\n                return h(\"InputNumber\", {\r\n                  props: {\r\n                    value: params.row.subordinateRebateRatioInputValue,\r\n                    step: 0.01,\r\n                    min: 0,\r\n                    max: 1,\r\n                    formatter: value => `${(100 * value).toFixed(0)}%`,\r\n                    parser: value => (0.01 * value.replace(\"%\", \"\")).toFixed(2)\r\n                  },\r\n                  on: {\r\n                    \"on-change\": newValue => {\r\n                      params.row.subordinateRebateRatioInputValue = newValue;\r\n                    }\r\n                  }\r\n                });\r\n              } else {\r\n                return h(\"div\", (100 * params.row.subordinateRebateRatio).toFixed(0) + \"%\");\r\n              }\r\n            }\r\n          },\r\n          {\r\n            title: \"操作\",\r\n            key: \"action\",\r\n            render: (h, params) => {\r\n              if (params.row.isBeingEdited) {\r\n                return h(\"div\", [\r\n                  h(\r\n                    \"Button\",\r\n                    {\r\n                      props: {\r\n                        type: \"primary\"\r\n                      },\r\n                      style: {\r\n                        marginRight: \"5px\"\r\n                      },\r\n                      on: {\r\n                        click: () => {\r\n                          this.submitRowChange(params.row);\r\n                        }\r\n                      }\r\n                    },\r\n                    \"确定\"\r\n                  ),\r\n                  h(\r\n                    \"Button\",\r\n                    {\r\n                      props: {\r\n                        type: \"error\"\r\n                      },\r\n                      on: {\r\n                        click: () => {\r\n                          this.cancelRowChange(params.index);\r\n                        }\r\n                      }\r\n                    },\r\n                    \"取消\"\r\n                  )\r\n                ]);\r\n              } else if (params.row.hasIndividualRebateRatio) {\r\n                return h(\"div\", [\r\n                  h(\r\n                    \"Button\",\r\n                    {\r\n                      props: {\r\n                        type: \"primary\"\r\n                      },\r\n                      style: {\r\n                        marginRight: \"5px\"\r\n                      },\r\n                      on: {\r\n                        click: () => {\r\n                          this.beginChangeRow(params.index);\r\n                        }\r\n                      }\r\n                    },\r\n                    \"调整独立返利比例\"\r\n                  ),\r\n                  h(\r\n                    \"Button\",\r\n                    {\r\n                      props: {\r\n                        type: \"error\"\r\n                      },\r\n                      on: {\r\n                        click: () => {\r\n                          this.onClickIndividualRebateRatioCancelBtn(params.row);\r\n                        }\r\n                      }\r\n                    },\r\n                    \"取消独立返利比例\"\r\n                  )\r\n                ]);\r\n              } else {\r\n                return h(\"Button\", {\r\n                  props: {\r\n                    type: \"primary\"\r\n                  },\r\n                  style: {\r\n                    marginRight: \"5px\"\r\n                  },\r\n                  on: {\r\n                    click: () => {\r\n                      this.beginChangeRow(params.index);\r\n                    }\r\n                  }\r\n                }, \"授予独立返利比例\");\r\n              }\r\n            }\r\n          }\r\n        ],\r\n        tableRows: [],\r\n        searchedAgentId: \"\",\r\n        beingEditedRowIndex: -1,\r\n        isShowingAgentWithoutIndividualRebateRatio: false,\r\n        latestSearch: null,\r\n      };\r\n    },\r\n\r\n    created() {\r\n      this.queryAllAgentsWithIndividualRebateRatio();\r\n    },\r\n\r\n    methods: {\r\n      handleSearchAgent() {\r\n        var isSearchingAllAgents = this.searchedAgentId.trim().length == 0;\r\n\r\n        if (isSearchingAllAgents) {\r\n          this.queryAllAgentsWithIndividualRebateRatio();\r\n        } else {\r\n          var agentId = parseInt(this.searchedAgentId.trim());\r\n          if (isNaN(agentId) || agentId <= 0) {\r\n            this.$Message.error(\"请正确输入代理id\");\r\n            return;\r\n          }\r\n\r\n          this.queryAgentRebateRatioInfo(agentId);\r\n        }\r\n      },\r\n\r\n      queryAllAgentsWithIndividualRebateRatio() {\r\n        // 清空table\r\n        this.tableRows = [];\r\n        this.isShowingAgentWithoutIndividualRebateRatio = false;\r\n\r\n        this.$http.post(global.url.query_agents_individual_rebate_ratio_info, {}).then(records => {\r\n          if (!records) {\r\n            return;\r\n          }\r\n\r\n          for (var i = 0; i < records.length; i++) {\r\n            this.tableRows.push({\r\n              id: records[i].agent_id,\r\n              name: records[i].name,\r\n              avatar: records[i].avatar,\r\n              commerceId: records[i].commerce_id,\r\n              commerceName: records[i].commerce_name,\r\n              directRebateRatio: records[i].direct_rebate_ratio,\r\n              subordinateRebateRatio: records[i].subordinate_rebate_ratio,\r\n              hasIndividualRebateRatio: (records[i].has_individual_rebate_ratio == 1),\r\n              agentLevelName: this.getAgentLevelNameByLevel(records[i].agent_level),\r\n              directRebateRatioInputValue: 0,\r\n              subordinateRebateRatioInputValue: 0,\r\n              isBeingEdited: false,\r\n            });\r\n          }\r\n        });\r\n\r\n        // 保存本次查询\r\n        this.latestSearch = () => { this.queryAllAgentsWithIndividualRebateRatio(); };\r\n      },\r\n\r\n      queryAgentRebateRatioInfo(agentId) {\r\n        // 清空table\r\n        this.tableRows = [];\r\n        this.isShowingAgentWithoutIndividualRebateRatio = false;\r\n\r\n        this.$http\r\n          .post(global.url.query_agent_individual_rebate_ratio_info, {\r\n            agentId: agentId\r\n          })\r\n          .then(record => {\r\n            if (!record) {\r\n              return;\r\n            }\r\n\r\n            if (record.err_code != 0) {\r\n              this.$Message.error(record.err_msg);\r\n              return;\r\n            }\r\n\r\n            this.tableRows.push({\r\n              id: record.agent_id,\r\n              name: record.name,\r\n              avatar: record.avatar,\r\n              commerceId: record.commerce_id,\r\n              commerceName: record.commerce_name,\r\n              directRebateRatio: record.direct_rebate_ratio,\r\n              subordinateRebateRatio: record.subordinate_rebate_ratio,\r\n              hasIndividualRebateRatio: (record.has_individual_rebate_ratio == 1),\r\n              agentLevelName: this.getAgentLevelNameByLevel(record.agent_level),\r\n              directRebateRatioInputValue: 0,\r\n              subordinateRebateRatioInputValue: 0,\r\n              isBeingEdited: false,\r\n            });\r\n\r\n            this.isShowingAgentWithoutIndividualRebateRatio = (record.has_individual_rebate_ratio == 0);\r\n          });\r\n\r\n        // 保存本次查询\r\n        this.latestSearch = () => { this.queryAgentRebateRatioInfo(agentId); };\r\n      },\r\n\r\n      submitRowChange(row) {\r\n        this.$http.post(global.url.update_agent_individual_rebate_ratio_info, {\r\n          agentId: row.id,\r\n          directRebateRatio: row.directRebateRatioInputValue,\r\n          subordinateRebateRatio: row.subordinateRebateRatioInputValue\r\n        }).then(record => {\r\n          if (!record) {\r\n            return;\r\n          }\r\n\r\n          if (record.err_code != 0) {\r\n            this.$Message.error(record.err_msg);\r\n          } else {\r\n            this.$Message.info(\"操作成功\");\r\n            row.isBeingEdited = false;\r\n\r\n            // 自动执行查询以刷新页面数据\r\n            this.latestSearch();\r\n          }\r\n        });\r\n      },\r\n\r\n      cancelRowChange(index) {\r\n        this.tableRows[index].isBeingEdited = false;\r\n        this.beingEditedRowIndex = -1;\r\n      },\r\n\r\n      beginChangeRow(index) {\r\n        if (this.beingEditedRowIndex >= 0) {\r\n          this.cancelRowChange(this.beingEditedRowIndex);\r\n        }\r\n\r\n        this.tableRows[index].isBeingEdited = true;\r\n        this.beingEditedRowIndex = index;\r\n        this.tableRows[index].directRebateRatioInputValue = this.tableRows[index].directRebateRatio;\r\n        this.tableRows[index].subordinateRebateRatioInputValue = this.tableRows[index].subordinateRebateRatio;\r\n      },\r\n\r\n      onClickIndividualRebateRatioCancelBtn(row) {\r\n        this.$Modal.confirm({\r\n          content: `<p>即将取消代理【${row.name}】的独立返利比例</p><p>取消后，该代理的返利比例将会是与其等级对应的默认值</p>`,\r\n          onOk: () => {\r\n            this.cancelIndividualRebateRatio(row.id);\r\n          }\r\n        });\r\n      },\r\n\r\n      cancelIndividualRebateRatio(agentId) {\r\n        this.$http.post(global.url.cancel_agent_individual_rebate_ratio, {\r\n          agentId: agentId\r\n        }).then(record => {\r\n          if (!record) {\r\n            return;\r\n          }\r\n\r\n          if (record.err_code != 0) {\r\n            this.$Message.error(record.err_msg);\r\n          } else {\r\n            this.$Message.info(\"操作成功\");\r\n\r\n            // 自动执行查询以刷新页面数据\r\n            this.latestSearch();\r\n          }\r\n        });\r\n      },\r\n\r\n      getAgentLevelNameByLevel(level) {\r\n        switch (level.toString()) {\r\n          case '1':\r\n            return \"预备代理\"\r\n          case '2':\r\n            return \"普通代理\"\r\n          case '3':\r\n            return \"铜牌代理\"\r\n          case '4':\r\n            return \"银牌代理\"\r\n          case '5':\r\n            return \"金牌代理\"\r\n          default:\r\n            return \"\";\r\n        }\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/operation/individual-rebate.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticClass:\"content-bar\"},[_c('Form',{attrs:{\"inline\":\"\"}},[_c('FormItem',{attrs:{\"label\":\"代理ID\",\"label-width\":80}},[_c('Input',{staticStyle:{\"width\":\"10em\"},attrs:{\"placeholder\":\"代理ID\",\"maxlength\":6,\"clearable\":\"\"},model:{value:(_vm.searchedAgentId),callback:function ($$v) {_vm.searchedAgentId=$$v},expression:\"searchedAgentId\"}})],1),_vm._v(\" \"),_c('FormItem',{attrs:{\"label-width\":0}},[_c('Button',{staticStyle:{\"margin-right\":\"10px\"},attrs:{\"type\":\"primary\"},on:{\"click\":_vm.handleSearchAgent}},[_vm._v(\"查询\")])],1)],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"10px\"}},[(_vm.isShowingAgentWithoutIndividualRebateRatio)?_c('div',{staticStyle:{\"color\":\"red\"}},[_vm._v(\"该代理尚未被授予独立返利比例：\")]):_c('div',[_vm._v(\"被授予独立返利比例的代理：\")])]),_vm._v(\" \"),_c('Table',{attrs:{\"columns\":_vm.tableColumns,\"data\":_vm.tableRows,\"border\":\"\"}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-9b212aac\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/operation/individual-rebate.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-9b212aac\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./individual-rebate.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./individual-rebate.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./individual-rebate.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-9b212aac\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./individual-rebate.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/operation/individual-rebate.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}