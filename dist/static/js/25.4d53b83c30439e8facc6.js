webpackJsonp([25],{"8m67":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("GSi9"),r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"operation-list"},[e("Table",{attrs:{border:"",columns:this.columns,data:this.list}})],1)},staticRenderFns:[]};var o=function(t){i("WBS4")},s=i("VU/8")(n.a,r,!1,o,null,null);e.default=s.exports},GSi9:function(t,e,i){"use strict";(function(t){e.a={data:function(){var t=this;return{dateTime:"",startTime:"",endTime:"",columns:[{title:"手机号码",align:"center",key:"mobile"},{title:"姓名",align:"center",key:"name"},{title:"区域",key:"location",align:"center"},{title:"身份证号码",key:"identity_card",align:"center"},{title:"开户银行",key:"bank_name",align:"center"},{title:"银行卡号",key:"bank_number",align:"center"},{title:"上级",align:"center",render:function(e,i){if(1==i.row.showSuperior){var n="";return n="超级管理员"==i.row.superior?"公司":i.row.superior,e("div",n)}return e("Select",{props:{size:"small",value:parseInt(i.row.superiorId)},on:{"on-change":function(t){i.row.superiorId=t}}},t.superiorList.map(function(t){return e("Option",{props:{value:t.accountId}},t.nickname)}))}},{title:"状态",align:"center",render:function(t,e){return t("div","0"==e.row.status?"正常":"禁用")}},{title:"授权日期",key:"createt_time",align:"center"},{title:"操作",align:"center",render:function(e,i){var n=1==i.row.status?"启用账号":"禁用账号";return 1==i.row.showSuperior?e("div",[e("Button",{props:{size:"small"}},[e("Poptip",{props:{confirm:!0,title:"确定要更改状态么?",placement:"left"},on:{"on-ok":function(){t.disable(i.row.account_id,i.row.status)}}},n)]),e("Button",{props:{size:"small"}},[e("Poptip",{props:{confirm:!0,title:"确定要重置么?",placement:"left"},on:{"on-ok":function(){t.restartPwd(i.row.account_id)}}},"重置账户密码")]),e("Button",{props:{size:"small"}},[e("Poptip",{props:{confirm:!0,title:"确定要修改上级?",placement:"left"},on:{"on-ok":function(){i.row.showSuperior=0}}},"修改上级")])]):e("div",[e("Button",{props:{size:"small"}},[e("Poptip",{props:{confirm:!0,title:"确定要更改状态么?",placement:"left"},on:{"on-ok":function(){t.disable(i.row.account_id,i.row.status)}}},n)]),e("Button",{props:{size:"small"}},[e("Poptip",{props:{confirm:!0,title:"确定要重置么?",placement:"left"},on:{"on-ok":function(){t.restartPwd(i.row.account_id)}}},"重置账户密码")]),e("Button",{props:{size:"small"}},[e("Poptip",{props:{confirm:!0,title:"确定要更改上级?",placement:"left"},on:{"on-ok":function(){t.updateSuperior(i.row.account_id,i.row.superiorId)},"on-cancel":function(){i.row.showSuperior=1}}},"确定修改")])])}}],list:[],superiorList:[]}},created:function(){this.startTime="2018-01-01",this.endTime="2099-01-01",this.getList(1,this.startTime,this.endTime)},methods:{jumpLink:function(t){this.$router.push({path:"/survey/commerce_search",query:{id:t,startTime:this.startTime,endTime:this.endTime}})},getList:function(e,i,n){var r=this,o=this.dateTime,s="",a="",u="";if(i)s=i,a=n;else{if(""==o[0]){if("1"==e)return this.$Message.error("查询时间不能为空！"),!1;if("2"==e)return this.$Message.error("导出时间不能为空！"),!1}if(o[0]){var c=new Date(o[0]);s=c.getFullYear()+"-"+(parseInt(c.getMonth())+1)+"-"+c.getDate()}if(o[1]){var l=new Date(o[1]);a=l.getFullYear()+"-"+(parseInt(l.getMonth())+1)+"-"+l.getDate()}}this.startTime=s,this.endTime=a,"1"==e?u=t.url.survey_commerce_list:"2"==e&&(u=t.url.educe_commerce_list),this.$http.get(u,{btime:s,etime:a}).then(function(i){"1"==e?(r.list=i.data,r.superiorList=i.superiorList):(window.open(t.baseUrl+i,"_blank"),-1!=i.indexOf("execl")&&r.$Message.success("导出成功"))})},disable:function(e,i){var n=this;1==i?i=0:0==i&&(i=1),this.$http.get(t.url.operation_commerce_update_status,{account_id:e,status:i}).then(function(t){1==t.affectedRows&&setTimeout(function(){n.getList(1,n.startTime,n.endTime)},500)})},restartPwd:function(e){var i=this;this.$http.post(t.url.commerce_restart,{aid:e}).then(function(t){i.$Message.success("重置成功"),setTimeout(function(){i.getList(1,i.startTime,i.endTime)},500)})},updateSuperior:function(e,i){var n=this;this.$http.get(t.url.operation_update_commerce_superior_id,{account_id:e,superior_id:i}).then(function(t){n.$Message.success("修改成功"),setTimeout(function(){n.getList(1,n.startTime,n.endTime)},500)})},cleanBox:function(){this.dateTime=""},educe:function(){alert(1)}}}}).call(e,i("DuR2"))},WBS4:function(t,e){}});
//# sourceMappingURL=25.4d53b83c30439e8facc6.js.map